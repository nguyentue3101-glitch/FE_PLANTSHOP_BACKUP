/* ============================================
   RESPONSIVE CSS - MOBILE ONLY
   Giữ nguyên layout desktop, chỉ scale down cho mobile
   ============================================ */

/* Mobile devices (max-width: 768px) */
@media only screen and (max-width: 768px) {
  /* Scale down toàn bộ app container */
  #app {
    transform: scale(0.5);
    transform-origin: top left;
    width: 200%;
    height: 1000px;
    /* Bỏ min-height cố định, để content tự quyết định */
  }

  /* Đảm bảo body và html không bị ảnh hưởng */
  html,
  body {
    width: 100%;
    height: auto;
    min-height: auto;
    overflow-x: hidden;
    overflow-y: auto;
    /* Bỏ khoảng trắng thừa */
    margin: 0;
    padding: 0;
  }

  /* Fix cho UserLayout - bỏ min-h-screen và height thừa */
  .flex.flex-col.min-h-screen {
    min-height: auto !important;
    height: auto !important;
    max-height: none !important;
  }

  /* Fix cho container chính trong UserLayout */
  .flex.flex-col.min-h-screen > div.w-full {
    height: auto !important;
    min-height: auto !important;
    max-height: none !important;
  }

  /* Bỏ tất cả height/min-height thừa từ containers */
  .container,
  .container.mx-auto,
  .container.mx-30 {
    height: auto !important;
    min-height: auto !important;
    max-height: none !important;
  }

  /* Fix cho header - giữ nguyên layout và tránh overflow */
  header {
    transform-origin: top left;
    max-width: 200%;
    overflow-x: hidden;
    position: relative;
  }

  /* Fix header bottom navigation - tránh giỏ hàng bị đẩy ra ngoài */
  header > div:last-child {
    overflow-x: hidden;
    max-width: 100%;
  }

  /* Fix cho phần navigation trong header */
  header .flex.justify-between {
    flex-wrap: nowrap;
    overflow-x: auto;
    -webkit-overflow-scrolling: touch;
    scrollbar-width: none; /* Firefox */
    -ms-overflow-style: none; /* IE/Edge */
  }

  header .flex.justify-between::-webkit-scrollbar {
    display: none; /* Chrome/Safari */
  }

  /* Đảm bảo giỏ hàng không bị đẩy ra ngoài */
  .cart-icon-container {
    flex-shrink: 0;
    margin-left: auto;
  }

  /* Fix cho footer - giữ nguyên layout và bỏ khoảng trắng */
  footer {
    transform-origin: top left;
    margin-bottom: 0 !important;
    padding-bottom: 0 !important;
  }

  /* Bỏ khoảng trắng sau footer */
  footer::after {
    content: none;
  }

  /* Fix khoảng trắng dưới footer - đảm bảo không có margin/padding thừa */
  body > *:last-child,
  #app > *:last-child,
  .flex.flex-col > *:last-child {
    margin-bottom: 0 !important;
    padding-bottom: 0 !important;
  }

  /* Đảm bảo không có khoảng trắng thừa sau footer */
  footer + * {
    display: none !important;
  }

  /* Fix cho các section có space-y hoặc margin-bottom thừa */
  section:last-of-type {
    margin-bottom: 0 !important;
    padding-bottom: 0 !important;
  }

  /* Fix khoảng trắng dưới footer - set height cho body dựa trên content */
  body {
    position: relative;
    height: auto !important;
    min-height: auto !important;
  }

  /* Bỏ tất cả khoảng trắng sau footer */
  footer ~ * {
    display: none !important;
  }

  /* Đảm bảo UserLayout không có height thừa */
  .flex.flex-col.min-h-screen > *:last-child {
    margin-bottom: 0 !important;
    padding-bottom: 0 !important;
  }

  /* Fix cho tất cả sections - bỏ height thừa */
  section {
    height: auto !important;
    min-height: auto !important;
  }

  /* Đảm bảo không có element nào có height thừa */
  div[class*="min-h"],
  div[class*="h-"]:not([class*="h-64"]):not([class*="h-20"]):not([class*="h-12"]) {
    min-height: auto !important;
  }

  /* Bỏ padding/margin thừa ở cuối trang */
  body::after,
  #app::after,
  .flex.flex-col::after {
    content: none !important;
    display: none !important;
  }

  /* Đảm bảo các modal và dropdown vẫn hiển thị đúng kích thước */
  /* Modal và dropdown sẽ được scale riêng để dễ tương tác */
  [class*="modal"],
  [class*="Modal"],
  .absolute[class*="Menu"],
  .fixed[class*="Menu"] {
    transform: scale(2) !important;
    transform-origin: center !important;
    z-index: 9999 !important;
  }

  /* Fix cho các element có position fixed/absolute trong header */
  header .sticky,
  header .fixed,
  header .absolute {
    transform-origin: top left;
  }

  /* Đảm bảo images không bị vỡ */
  img {
    max-width: 100%;
    height: auto;
    object-fit: contain;
  }

  /* Fix scroll behavior cho mobile */
  * {
    -webkit-overflow-scrolling: touch;
  }

  /* Đảm bảo các button và link vẫn có thể click được */
  button,
  a,
  [role="button"] {
    touch-action: manipulation;
  }

  /* Giảm kích thước items trên home page để phù hợp hơn */
  /* Các product cards và category cards */
  section[class*="px-10"] .flex-shrink-0 {
    min-width: 0;
  }

  /* Điều chỉnh kích thước items trong section Danh Mục và Sản Phẩm Nổi Bật */
  section .flex.transition-transform {
    overflow-x: hidden !important;
    flex-wrap: wrap !important;
    width: 100% !important;
    max-width: 100% !important;
  }

  section .flex.transition-transform .flex-shrink-0 {
    width: calc(50% - 0.75rem) !important;
    min-width: calc(50% - 0.75rem) !important;
    max-width: calc(50% - 0.75rem) !important;
    flex-shrink: 0;
  }

  /* Fix riêng cho section Sản Phẩm Nổi Bật - đảm bảo items không bị đẩy ra ngoài */
  section.px-10.py-12.relative .flex.transition-transform {
    display: flex !important;
    flex-wrap: wrap !important;
    overflow-x: hidden !important;
    gap: 0.75rem !important;
    padding-left: 0 !important;
    padding-right: 0 !important;
  }

  section.px-10.py-12.relative .flex.transition-transform .flex-shrink-0 {
    width: calc(50% - 0.375rem) !important;
    min-width: calc(50% - 0.375rem) !important;
    max-width: calc(50% - 0.375rem) !important;
  }

  /* Giảm padding và spacing cho items */
  section .flex-shrink-0 .p-4 {
    padding: 0.75rem;
  }

  /* Giảm kích thước hình ảnh trong items */
  section .flex-shrink-0 img {
    max-width: 80%;
    max-height: 80%;
  }

  /* ========== FIX CHO TRANG SẢN PHẨM ========== */
  /* Đảm bảo DataPager (bộ lọc) vẫn hiển thị */
  .container.mx-auto.px-4,
  .container.mx-30 {
    overflow: visible !important;
    max-width: 100% !important;
  }

  /* Đảm bảo bộ lọc không bị ẩn - dùng selector tổng quát hơn */
  div[class*="flex"][class*="flex-col"],
  div[class*="flex"][class*="gap-4"] {
    display: flex !important;
    visibility: visible !important;
    opacity: 1 !important;
  }

  /* Bộ lọc hiển thị ngang như desktop (2 dropdown cạnh nhau) - FULL WIDTH */
  .container .flex.flex-col[class*="gap-4"],
  .container div[class*="flex"][class*="flex-col"][class*="gap-4"] {
    flex-direction: row !important;
    flex-wrap: wrap !important;
    gap: 0.5rem !important;
    margin-top: 0.5rem !important;
    margin-bottom: 0.5rem !important;
    width: 100% !important;
    max-width: 100% !important;
    position: relative !important;
    z-index: 1 !important;
  }

  /* Scale bộ lọc nhỏ lại - vừa phải để dễ tương tác - FULL WIDTH */
  .container select,
  .container .flex select,
  .container div[class*="flex"] select {
    transform: scale(1.2) !important;
    transform-origin: top left !important;
    width: calc(50% - 0.25rem) !important;
    min-width: calc(50% - 0.25rem) !important;
    max-width: calc(50% - 0.25rem) !important;
    padding: 0.5rem 0.75rem !important;
    font-size: 0.875rem !important;
    position: relative !important;
    z-index: 1 !important;
  }

  /* Container của mỗi select trong bộ lọc - FULL WIDTH */
  .container .flex > div[class*="sm:w-48"],
  .container .flex.flex-col > div,
  .container div[class*="flex"] > div {
    width: calc(50% - 0.25rem) !important;
    min-width: calc(50% - 0.25rem) !important;
    max-width: calc(50% - 0.25rem) !important;
    flex: 0 0 calc(50% - 0.25rem) !important;
  }

  /* Đảm bảo container bộ lọc full width */
  .container.mx-auto.px-4 > div:first-child {
    width: 100% !important;
    max-width: 100% !important;
  }

  /* Đảm bảo container bộ lọc có margin-top để không đè lên banner và full width */
  .container.mx-auto.px-4 > div:first-child {
    margin-top: 0.5rem !important;
    position: relative !important;
    z-index: 1 !important;
    width: 100% !important;
    max-width: 100% !important;
  }

  /* Fix cho ProductList - hiển thị 2 items mỗi dòng giống trang chủ */
  .grid[class*="grid-cols"],
  div[class*="grid"][class*="grid-cols"] {
    grid-template-columns: repeat(2, minmax(0, 1fr)) !important;
    gap: 0.75rem !important;
    width: 100% !important;
    max-width: 100% !important;
    padding: 0 !important;
  }

  /* Thu nhỏ product cards - giống trang chủ */
  .product-card,
  .grid > div {
    max-width: 100% !important;
    width: 100% !important;
    padding: 0.75rem !important;
  }

  /* Thu nhỏ hình ảnh sản phẩm - giống trang chủ */
  .product-card img,
  .grid img,
  .grid .product-card img {
    max-width: 100% !important;
    max-height: 150px !important;
    object-fit: contain !important;
  }

  /* Thu nhỏ container hình ảnh - giống trang chủ */
  .product-card .relative.h-64,
  .grid .relative[class*="h-"] {
    height: 120px !important;
    min-height: 120px !important;
  }

  /* Thu nhỏ text trong product cards - giống trang chủ */
  .product-card h3 {
    font-size: 0.875rem !important;
    line-height: 1.3 !important;
    margin-bottom: 0.5rem !important;
  }

  .product-card p {
    font-size: 0.75rem !important;
    line-height: 1.3 !important;
  }

  .product-card .text-xl {
    font-size: 1rem !important;
  }

  /* Thu nhỏ banner trên trang sản phẩm */
  section.relative.h-\\[200px\\],
  section.relative[class*="h-"] {
    height: 100px !important;
    min-height: 100px !important;
    max-height: 100px !important;
  }

  section.relative.h-\\[200px\\] h1,
  section.relative[class*="h-"] h1 {
    font-size: 1.5rem !important;
  }

  /* Đảm bảo banner không bị đè bởi bộ lọc */
  section.relative[class*="h-"] {
    position: relative !important;
    z-index: 0 !important;
  }

  /* Đảm bảo phần content sau banner có margin-top */
  section.relative[class*="h-"] + div,
  section.relative[class*="h-"] ~ div {
    margin-top: 0 !important;
    padding-top: 0.5rem !important;
  }
}

/* Tablet devices (768px - 1024px) - scale nhẹ hơn */
@media only screen and (min-width: 769px) and (max-width: 1024px) {
  #app {
    transform: scale(0.75);
    transform-origin: top left;
    width: 133.33%;
  }

  html,
  body {
    width: 100%;
    overflow-x: hidden;
    margin: 0;
    padding: 0;
  }

  header {
    max-width: 133.33%;
    overflow-x: hidden;
  }

  footer {
    margin-bottom: 0;
    padding-bottom: 0;
  }

  [class*="modal"],
  [class*="Modal"],
  .absolute[class*="Menu"],
  .fixed[class*="Menu"] {
    transform: scale(1.33) !important;
    transform-origin: center !important;
  }
}

/* Desktop - giữ nguyên (không scale) */
@media only screen and (min-width: 1025px) {
  #app {
    transform: none;
    width: 100%;
  }

  html,
  body {
    margin: 0;
    padding: 0;
  }

  [class*="modal"],
  [class*="Modal"],
  .absolute[class*="Menu"],
  .fixed[class*="Menu"] {
    transform: none !important;
  }
}
